apiVersion: metacontroller.k8s.io/v1alpha1
kind: CompositeController
metadata:
  annotations:
    image: metacontroller/jsonnetd@sha256:25c25f217ad030a0f67e37078c33194785b494569b0c088d8df4f00da8fd15a0
    name: profiles
    namespace: default
    server: https://35.203.186.20
  name: permissions-controller
spec:
  childResources:
  - apiVersion: rbac.authorization.k8s.io/v1
    resource: roles
  - apiVersion: rbac.authorization.k8s.io/v1
    resource: rolebindings
  generateSelector: true
  hooks:
    sync:
      webhook:
        url: http://profiles.default/sync-permission
  parentResource:
    apiVersion: kubeflow.org/v1alpha1
    resource: permissions
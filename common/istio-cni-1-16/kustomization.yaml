#We have to add this as profile to the current istio instalation way and clean up a lot of deprecated stuff...

#### Kubernetes 1.24+
# install full cni enabled standalone istio
#ISTIO_TAG=1.16.4
#curl -L https://github.com/istio/istio/releases/download/${ISTIO_TAG}/istio-${ISTIO_TAG}-linux-amd64.tar.gz -o istio.tar.gz
#tar xzf istio.tar.gz
#istio-${ISTIO_TAG}/bin/istioctl manifest generate --set values.pilot.autoscaleMin=1 --set values.gateways.istio-ingressgateway.autoscaleMin=1 --set components.cni.enabled=true --set components.cni.namespace=kube-system --set components.cni.tag=${ISTIO_TAG} --set values.global.proxy.resources.requests.cpu=10m --set tag=${ISTIO_TAG} > istio.yaml
#rm -rf istio-${ISTIO_TAG} istio.tar.gz
apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- namespace.yaml
- istio.yaml
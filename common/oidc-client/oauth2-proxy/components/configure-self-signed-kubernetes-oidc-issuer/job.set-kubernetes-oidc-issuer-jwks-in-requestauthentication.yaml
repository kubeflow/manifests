apiVersion: batch/v1
kind: Job
metadata:
  name: set-kubernetes-oidc-issuer-jwks-in-requestauthentication
  namespace: istio-system
spec:
  template:
    metadata:
      labels: {}
    spec:
      restartPolicy: OnFailure
      serviceAccountName: self-signed-kubernetes-oidc-issuer-configurator
      containers:
      - image: curlimages/curl
        name: set-kubernetes-oidc-issuer-jwks-in-requestauthentication
        command:
          # - sleep
          # - inf
          - sh
          - /script.sh
        volumeMounts:
          - mountPath: /script.sh
            name: script
            subPath: script.sh
        resources: {}
      volumes:
        - name: script
          configMap:
            name: configure-self-signed-kubernetes-oidc-issuer-script
            defaultMode: 0777
            items:
            - key: script.sh
              path: script.sh
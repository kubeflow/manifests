apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
bases:
- ../../base
resources:
- cluster-role.yaml
- cluster-role-binding.yaml
- etcd-storage-class.yaml
patchesStrategicMerge:
- etcd-stateful-set.yaml
configMapGenerator:
- name: parameters
  behavior: merge
  env: params.env
secretGenerator:
- name: secrets
  behavior: merge
  env: secrets.env
vars:
- name: etcdStorageClass
  objref:
    kind: StorageClass
    name: etcd-storage-class
    apiVersion: storage.k8s.io/v1
  fieldref:
    fieldpath: metadata.name
configurations:
- params.yaml
